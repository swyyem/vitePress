@use 'mixins/mixins' as *;
@use 'mixins/var' as *;
@use 'common/var' as *;

@include b(tooltip) {
  display: inline-block;
  position: relative;

  @include e(trigger) {
    display: inline-block;
  }

  @include e(popper) {
    position: absolute;
    background: getCssVar('bg-color-overlay');
    color: getCssVar('text-color-primary');
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 13px;
    z-index: 2000;
    white-space: normal;
    line-height: 1.4;
    box-shadow: getCssVar('box-shadow-light');
    max-width: 300px;
    word-wrap: break-word;

    @include e(arrow) {
      position: absolute;
      width: 8px;
      height: 8px;
      background: inherit;
      z-index: -1;

      @include m(top) {
        bottom: -4px;
        left: 50%;
        transform: translateX(-50%) rotate(45deg);
      }

      @include m(bottom) {
        top: -4px;
        left: 50%;
        transform: translateX(-50%) rotate(45deg);
      }

      @include m(left) {
        right: -4px;
        top: 50%;
        transform: translateY(-50%) rotate(45deg);
      }

      @include m(right) {
        left: -4px;
        top: 50%;
        transform: translateY(-50%) rotate(45deg);
      }

      @include m(top-start) {
        bottom: -4px;
        left: 20%;
        transform: rotate(45deg);
      }

      @include m(top-end) {
        bottom: -4px;
        left: 80%;
        transform: rotate(45deg);
      }

      @include m(bottom-start) {
        top: -4px;
        left: 20%;
        transform: rotate(45deg);
      }

      @include m(bottom-end) {
        top: -4px;
        left: 80%;
        transform: rotate(45deg);
      }

      @include m(left-start) {
        right: -4px;
        top: 20%;
        transform: rotate(45deg);
      }

      @include m(left-end) {
        right: -4px;
        top: 80%;
        transform: rotate(45deg);
      }

      @include m(right-start) {
        left: -4px;
        top: 20%;
        transform: rotate(45deg);
      }

      @include m(right-end) {
        left: -4px;
        top: 80%;
        transform: rotate(45deg);
      }
    }

    @include m(top) {
      margin-bottom: 8px;

      &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 50%;
        transform: translateX(-50%);
        border: 4px solid transparent;
        border-top-color: inherit;
      }
    }

    @include m(top-start) {
      margin-bottom: 8px;

      &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 20%;
        border: 4px solid transparent;
        border-top-color: inherit;
      }
    }

    @include m(top-end) {
      margin-bottom: 8px;

      &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 80%;
        border: 4px solid transparent;
        border-top-color: inherit;
      }
    }

    @include m(bottom) {
      margin-top: 8px;

      &::after {
        content: '';
        position: absolute;
        top: -4px;
        left: 50%;
        transform: translateX(-50%);
        border: 4px solid transparent;
        border-bottom-color: inherit;
      }
    }

    @include m(bottom-start) {
      margin-top: 8px;

      &::after {
        content: '';
        position: absolute;
        top: -4px;
        left: 20%;
        border: 4px solid transparent;
        border-bottom-color: inherit;
      }
    }

    @include m(bottom-end) {
      margin-top: 8px;

      &::after {
        content: '';
        position: absolute;
        top: -4px;
        left: 80%;
        border: 4px solid transparent;
        border-bottom-color: inherit;
      }
    }

    @include m(left) {
      margin-right: 8px;

      &::after {
        content: '';
        position: absolute;
        right: -4px;
        top: 50%;
        transform: translateY(-50%);
        border: 4px solid transparent;
        border-left-color: inherit;
      }
    }

    @include m(left-start) {
      margin-right: 8px;

      &::after {
        content: '';
        position: absolute;
        right: -4px;
        top: 20%;
        border: 4px solid transparent;
        border-left-color: inherit;
      }
    }

    @include m(left-end) {
      margin-right: 8px;

      &::after {
        content: '';
        position: absolute;
        right: -4px;
        top: 80%;
        border: 4px solid transparent;
        border-left-color: inherit;
      }
    }

    @include m(right) {
      margin-left: 8px;

      &::after {
        content: '';
        position: absolute;
        left: -4px;
        top: 50%;
        transform: translateY(-50%);
        border: 4px solid transparent;
        border-right-color: inherit;
      }
    }

    @include m(right-start) {
      margin-left: 8px;

      &::after {
        content: '';
        position: absolute;
        left: -4px;
        top: 20%;
        border: 4px solid transparent;
        border-right-color: inherit;
      }
    }

    @include m(right-end) {
      margin-left: 8px;

      &::after {
        content: '';
        position: absolute;
        left: -4px;
        top: 80%;
        border: 4px solid transparent;
        border-right-color: inherit;
      }
    }

    @include when(dark) {
      background: getCssVarWithDefault(('tooltip-bg-color', 'dark'), #303133);
      color: getCssVarWithDefault(('tooltip-text-color', 'dark'), #ffffff);
    }

    @include when(light) {
      background: getCssVarWithDefault(('tooltip-bg-color', 'light'), #ffffff);
      color: getCssVarWithDefault(('tooltip-text-color', 'light'), #606266);
      border: 1px solid getCssVarWithDefault(('tooltip-border-color', 'light'), #dcdfe6);

      &::after {
        border-color: getCssVarWithDefault(('tooltip-border-color', 'light'), #dcdfe6);
      }
    }
  }
}

@include b(tooltip) {
  @include when(disabled) {
    pointer-events: none;
    cursor: not-allowed;
    opacity: 0.6;
  }

  @include e(trigger) {
    @include when(disabled) {
      pointer-events: none;
      cursor: not-allowed;
      opacity: 0.6;
    }
  }
}

.swy-tooltip-fade-enter-active,
.swy-tooltip-fade-leave-active {
  transition:
    opacity 0.2s,
    transform 0.2s;
}

.swy-tooltip-fade-enter-from,
.swy-tooltip-fade-leave-to {
  opacity: 0;
  transform: scale(0.8);
}
